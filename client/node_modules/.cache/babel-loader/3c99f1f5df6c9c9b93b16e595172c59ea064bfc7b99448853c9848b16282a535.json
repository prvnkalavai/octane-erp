{"ast":null,"code":"import * as log from '../../../log';\nimport { contains } from '../../../util';\nimport { getMarkPropOrConfig, signalOrValueRef } from '../../common';\nimport { nonPosition } from './nonposition';\nexport function color(model, opt = {\n  filled: undefined\n}) {\n  const {\n    markDef,\n    encoding,\n    config\n  } = model;\n  const {\n    type: markType\n  } = markDef;\n  // Allow filled to be overridden (for trail's \"filled\")\n  const filled = opt.filled ?? getMarkPropOrConfig('filled', markDef, config);\n  const transparentIfNeeded = contains(['bar', 'point', 'circle', 'square', 'geoshape'], markType) ? 'transparent' : undefined;\n  const defaultFill = getMarkPropOrConfig(filled === true ? 'color' : undefined, markDef, config, {\n    vgChannel: 'fill'\n  }) ??\n  // need to add this manually as getMarkConfig normally drops config.mark[channel] if vgChannel is specified\n  config.mark[filled === true && 'color'] ??\n  // If there is no fill, always fill symbols, bar, geoshape\n  // with transparent fills https://github.com/vega/vega-lite/issues/1316\n  transparentIfNeeded;\n  const defaultStroke = getMarkPropOrConfig(filled === false ? 'color' : undefined, markDef, config, {\n    vgChannel: 'stroke'\n  }) ??\n  // need to add this manually as getMarkConfig normally drops config.mark[channel] if vgChannel is specified\n  config.mark[filled === false && 'color'];\n  const colorVgChannel = filled ? 'fill' : 'stroke';\n  const fillStrokeMarkDefAndConfig = {\n    ...(defaultFill ? {\n      fill: signalOrValueRef(defaultFill)\n    } : {}),\n    ...(defaultStroke ? {\n      stroke: signalOrValueRef(defaultStroke)\n    } : {})\n  };\n  if (markDef.color && (filled ? markDef.fill : markDef.stroke)) {\n    log.warn(log.message.droppingColor('property', {\n      fill: 'fill' in markDef,\n      stroke: 'stroke' in markDef\n    }));\n  }\n  return {\n    ...fillStrokeMarkDefAndConfig,\n    ...nonPosition('color', model, {\n      vgChannel: colorVgChannel,\n      defaultValue: filled ? defaultFill : defaultStroke\n    }),\n    ...nonPosition('fill', model, {\n      // if there is encoding.fill, include default fill just in case we have conditional-only fill encoding\n      defaultValue: encoding.fill ? defaultFill : undefined\n    }),\n    ...nonPosition('stroke', model, {\n      // if there is encoding.stroke, include default fill just in case we have conditional-only stroke encoding\n      defaultValue: encoding.stroke ? defaultStroke : undefined\n    })\n  };\n}","map":{"version":3,"names":["log","contains","getMarkPropOrConfig","signalOrValueRef","nonPosition","color","model","opt","filled","undefined","markDef","encoding","config","type","markType","transparentIfNeeded","defaultFill","vgChannel","mark","defaultStroke","colorVgChannel","fillStrokeMarkDefAndConfig","fill","stroke","warn","message","droppingColor","defaultValue"],"sources":["C:\\Users\\prave\\Repos\\octane-erp\\client\\node_modules\\vega-lite\\src\\compile\\mark\\encode\\color.ts"],"sourcesContent":["import * as log from '../../../log';\nimport {contains} from '../../../util';\nimport {VgEncodeEntry} from '../../../vega.schema';\nimport {getMarkPropOrConfig, signalOrValueRef} from '../../common';\nimport {UnitModel} from '../../unit';\nimport {nonPosition} from './nonposition';\n\nexport function color(model: UnitModel, opt: {filled: boolean | undefined} = {filled: undefined}): VgEncodeEntry {\n  const {markDef, encoding, config} = model;\n  const {type: markType} = markDef;\n\n  // Allow filled to be overridden (for trail's \"filled\")\n  const filled = opt.filled ?? getMarkPropOrConfig('filled', markDef, config);\n\n  const transparentIfNeeded = contains(['bar', 'point', 'circle', 'square', 'geoshape'], markType)\n    ? 'transparent'\n    : undefined;\n\n  const defaultFill =\n    getMarkPropOrConfig(filled === true ? 'color' : undefined, markDef, config, {vgChannel: 'fill'}) ??\n    // need to add this manually as getMarkConfig normally drops config.mark[channel] if vgChannel is specified\n    (config.mark as any)[filled === true && 'color'] ??\n    // If there is no fill, always fill symbols, bar, geoshape\n    // with transparent fills https://github.com/vega/vega-lite/issues/1316\n    transparentIfNeeded;\n\n  const defaultStroke =\n    getMarkPropOrConfig(filled === false ? 'color' : undefined, markDef, config, {vgChannel: 'stroke'}) ??\n    // need to add this manually as getMarkConfig normally drops config.mark[channel] if vgChannel is specified\n    (config.mark as any)[filled === false && 'color'];\n\n  const colorVgChannel = filled ? 'fill' : 'stroke';\n\n  const fillStrokeMarkDefAndConfig: VgEncodeEntry = {\n    ...(defaultFill ? {fill: signalOrValueRef(defaultFill)} : {}),\n    ...(defaultStroke ? {stroke: signalOrValueRef(defaultStroke)} : {})\n  };\n\n  if (markDef.color && (filled ? markDef.fill : markDef.stroke)) {\n    log.warn(log.message.droppingColor('property', {fill: 'fill' in markDef, stroke: 'stroke' in markDef}));\n  }\n\n  return {\n    ...fillStrokeMarkDefAndConfig,\n    ...nonPosition('color', model, {\n      vgChannel: colorVgChannel,\n      defaultValue: filled ? defaultFill : defaultStroke\n    }),\n    ...nonPosition('fill', model, {\n      // if there is encoding.fill, include default fill just in case we have conditional-only fill encoding\n      defaultValue: encoding.fill ? defaultFill : undefined\n    }),\n    ...nonPosition('stroke', model, {\n      // if there is encoding.stroke, include default fill just in case we have conditional-only stroke encoding\n      defaultValue: encoding.stroke ? defaultStroke : undefined\n    })\n  };\n}\n"],"mappings":"AAAA,OAAO,KAAKA,GAAG,MAAM,cAAc;AACnC,SAAQC,QAAQ,QAAO,eAAe;AAEtC,SAAQC,mBAAmB,EAAEC,gBAAgB,QAAO,cAAc;AAElE,SAAQC,WAAW,QAAO,eAAe;AAEzC,OAAM,SAAUC,KAAKA,CAACC,KAAgB,EAAEC,GAAA,GAAqC;EAACC,MAAM,EAAEC;AAAS,CAAC;EAC9F,MAAM;IAACC,OAAO;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAGN,KAAK;EACzC,MAAM;IAACO,IAAI,EAAEC;EAAQ,CAAC,GAAGJ,OAAO;EAEhC;EACA,MAAMF,MAAM,GAAGD,GAAG,CAACC,MAAM,IAAIN,mBAAmB,CAAC,QAAQ,EAAEQ,OAAO,EAAEE,MAAM,CAAC;EAE3E,MAAMG,mBAAmB,GAAGd,QAAQ,CAAC,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,CAAC,EAAEa,QAAQ,CAAC,GAC5F,aAAa,GACbL,SAAS;EAEb,MAAMO,WAAW,GACfd,mBAAmB,CAACM,MAAM,KAAK,IAAI,GAAG,OAAO,GAAGC,SAAS,EAAEC,OAAO,EAAEE,MAAM,EAAE;IAACK,SAAS,EAAE;EAAM,CAAC,CAAC;EAChG;EACCL,MAAM,CAACM,IAAY,CAACV,MAAM,KAAK,IAAI,IAAI,OAAO,CAAC;EAChD;EACA;EACAO,mBAAmB;EAErB,MAAMI,aAAa,GACjBjB,mBAAmB,CAACM,MAAM,KAAK,KAAK,GAAG,OAAO,GAAGC,SAAS,EAAEC,OAAO,EAAEE,MAAM,EAAE;IAACK,SAAS,EAAE;EAAQ,CAAC,CAAC;EACnG;EACCL,MAAM,CAACM,IAAY,CAACV,MAAM,KAAK,KAAK,IAAI,OAAO,CAAC;EAEnD,MAAMY,cAAc,GAAGZ,MAAM,GAAG,MAAM,GAAG,QAAQ;EAEjD,MAAMa,0BAA0B,GAAkB;IAChD,IAAIL,WAAW,GAAG;MAACM,IAAI,EAAEnB,gBAAgB,CAACa,WAAW;IAAC,CAAC,GAAG,EAAE,CAAC;IAC7D,IAAIG,aAAa,GAAG;MAACI,MAAM,EAAEpB,gBAAgB,CAACgB,aAAa;IAAC,CAAC,GAAG,EAAE;GACnE;EAED,IAAIT,OAAO,CAACL,KAAK,KAAKG,MAAM,GAAGE,OAAO,CAACY,IAAI,GAAGZ,OAAO,CAACa,MAAM,CAAC,EAAE;IAC7DvB,GAAG,CAACwB,IAAI,CAACxB,GAAG,CAACyB,OAAO,CAACC,aAAa,CAAC,UAAU,EAAE;MAACJ,IAAI,EAAE,MAAM,IAAIZ,OAAO;MAAEa,MAAM,EAAE,QAAQ,IAAIb;IAAO,CAAC,CAAC,CAAC;EACzG;EAEA,OAAO;IACL,GAAGW,0BAA0B;IAC7B,GAAGjB,WAAW,CAAC,OAAO,EAAEE,KAAK,EAAE;MAC7BW,SAAS,EAAEG,cAAc;MACzBO,YAAY,EAAEnB,MAAM,GAAGQ,WAAW,GAAGG;KACtC,CAAC;IACF,GAAGf,WAAW,CAAC,MAAM,EAAEE,KAAK,EAAE;MAC5B;MACAqB,YAAY,EAAEhB,QAAQ,CAACW,IAAI,GAAGN,WAAW,GAAGP;KAC7C,CAAC;IACF,GAAGL,WAAW,CAAC,QAAQ,EAAEE,KAAK,EAAE;MAC9B;MACAqB,YAAY,EAAEhB,QAAQ,CAACY,MAAM,GAAGJ,aAAa,GAAGV;KACjD;GACF;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}